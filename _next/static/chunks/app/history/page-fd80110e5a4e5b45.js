(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[811],{6141:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},8431:function(e,t,r){Promise.resolve().then(r.bind(r,4002))},4002:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return G}});var a=r(7437),s=r(2265),n=r(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,n.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var i=r(6141),c=r(6110),l=r(9213),d=r(9311);let u=(0,l.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600"}},defaultVariants:{variant:"default"}});function f(e){let{className:t,variant:r,...s}=e;return(0,a.jsx)("div",{className:(0,d.cn)(u({variant:r}),t),...s})}function m(e){let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,d.cn)("animate-pulse rounded-md bg-muted",t),...r})}var p=r(3023),x=r(164),h=r(6989),g=r(2210),y=r(8712),b=r(5744),v=r(7256),j="AlertDialog",[N,w]=(0,h.b)(j,[y.p8]),k=(0,y.p8)(),D=e=>{let{__scopeAlertDialog:t,...r}=e,s=k(t);return(0,a.jsx)(y.fC,{...s,...r,modal:!0})};D.displayName=j;var A=s.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...s}=e,n=k(r);return(0,a.jsx)(y.xz,{...n,...s,ref:t})});A.displayName="AlertDialogTrigger";var S=e=>{let{__scopeAlertDialog:t,...r}=e,s=k(t);return(0,a.jsx)(y.h_,{...s,...r})};S.displayName="AlertDialogPortal";var R=s.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...s}=e,n=k(r);return(0,a.jsx)(y.aV,{...n,...s,ref:t})});R.displayName="AlertDialogOverlay";var E="AlertDialogContent",[C,P]=N(E),O=s.forwardRef((e,t)=>{let{__scopeAlertDialog:r,children:n,...o}=e,i=k(r),c=s.useRef(null),l=(0,g.e)(t,c),d=s.useRef(null);return(0,a.jsx)(y.jm,{contentName:E,titleName:T,docsSlug:"alert-dialog",children:(0,a.jsx)(C,{scope:r,cancelRef:d,children:(0,a.jsxs)(y.VY,{role:"alertdialog",...i,...o,ref:l,onOpenAutoFocus:(0,b.M)(o.onOpenAutoFocus,e=>{e.preventDefault(),d.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,a.jsx)(v.A4,{children:n}),(0,a.jsx)(Z,{contentRef:c})]})})})});O.displayName=E;var T="AlertDialogTitle",I=s.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...s}=e,n=k(r);return(0,a.jsx)(y.Dx,{...n,...s,ref:t})});I.displayName=T;var _="AlertDialogDescription",F=s.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...s}=e,n=k(r);return(0,a.jsx)(y.dk,{...n,...s,ref:t})});F.displayName=_;var H=s.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...s}=e,n=k(r);return(0,a.jsx)(y.x8,{...n,...s,ref:t})});H.displayName="AlertDialogAction";var M="AlertDialogCancel",B=s.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...s}=e,{cancelRef:n}=P(M,r),o=k(r),i=(0,g.e)(t,n);return(0,a.jsx)(y.x8,{...o,...s,ref:i})});B.displayName=M;var Z=({contentRef:e})=>{let t=`\`${E}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${E}\` by passing a \`${_}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${E}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return s.useEffect(()=>{let r=document.getElementById(e.current?.getAttribute("aria-describedby"));r||console.warn(t)},[t,e]),null};let z=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(R,{className:(0,d.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...s,ref:t})});z.displayName=R.displayName;let L=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsxs)(S,{children:[(0,a.jsx)(z,{}),(0,a.jsx)(O,{ref:t,className:(0,d.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...s})]})});L.displayName=O.displayName;let W=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,d.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...r})};W.displayName="AlertDialogHeader";let V=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,d.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};V.displayName="AlertDialogFooter";let Y=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(I,{ref:t,className:(0,d.cn)("text-lg font-semibold",r),...s})});Y.displayName=I.displayName;let $=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(F,{ref:t,className:(0,d.cn)("text-sm text-muted-foreground",r),...s})});$.displayName=F.displayName;let U=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(H,{ref:t,className:(0,d.cn)((0,p.d)(),r),...s})});U.displayName=H.displayName;let X=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(B,{ref:t,className:(0,d.cn)((0,p.d)({variant:"outline"}),"mt-2 sm:mt-0",r),...s})});function G(){let[e,t]=(0,s.useState)([]),[r,n]=(0,s.useState)(!0),[l,u]=(0,s.useState)(null);(0,s.useEffect)(()=>{let e=async()=>{n(!0);try{let e=await (0,x.cn)(5);t(e)}catch(e){console.error("Failed to fetch scan history:",e)}finally{n(!1)}};e()},[]);let h=async(e,r)=>{u(e);try{let a=await (0,x.li)(e);if(!a.success){console.error("Failed to delete scan:",a.error),alert("Failed to delete scan: ".concat(a.error)),u(null);return}let s=await (0,x.Xr)(r);s.success||(console.error("Failed to delete part (scan was deleted):",s.error),alert("Scan deleted, but failed to delete part: ".concat(s.error))),t(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Error during delete operation:",e),alert("An error occurred: ".concat(e instanceof Error?e.message:"Unknown error"))}finally{u(null)}};return(0,a.jsxs)("div",{className:"max-w-5xl mx-auto space-y-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsx)("h1",{className:"text-2xl font-bold tracking-tight",children:"Scan History"})}),r?(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsxs)(c.Zb,{children:[(0,a.jsx)(c.Ol,{className:"pb-2",children:(0,a.jsx)(m,{className:"h-4 w-32"})}),(0,a.jsxs)(c.aY,{className:"space-y-2",children:[(0,a.jsx)(m,{className:"h-4 w-full"}),(0,a.jsx)(m,{className:"h-4 w-3/4"}),(0,a.jsxs)("div",{className:"pt-2 flex justify-between",children:[(0,a.jsx)(m,{className:"h-4 w-20"}),(0,a.jsx)(m,{className:"h-4 w-24"})]})]}),(0,a.jsx)(c.eW,{children:(0,a.jsx)(m,{className:"h-8 w-20"})})]},t))}):e.length>0?(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:e.map(e=>(0,a.jsxs)(c.Zb,{className:"overflow-hidden transition-all hover:shadow-md flex flex-col",children:[(0,a.jsx)(c.Ol,{className:"pb-2",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(c.ll,{className:"text-lg",children:["Part #",e.partNumber]}),(0,a.jsx)(f,{variant:"In Stock"===e.status?"success":"default",children:e.status})]})}),(0,a.jsxs)(c.aY,{className:"space-y-2 flex-grow",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Location:"}),(0,a.jsx)("span",{children:e.location})]}),e.vin&&(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"VIN:"}),(0,a.jsx)("span",{className:"font-mono",children:e.vin})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm pt-2 border-t mt-2",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Scanned by:"}),(0,a.jsx)("span",{children:e.scannedBy||"N/A"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Date:"}),(0,a.jsx)("span",{children:(0,d.p)(e.timestamp)})]})]}),(0,a.jsx)(c.eW,{className:"pt-4 border-t",children:(0,a.jsxs)(D,{children:[(0,a.jsx)(A,{asChild:!0,children:(0,a.jsx)(p.z,{variant:"destructive",size:"sm",className:"w-full",disabled:l===e.id,children:l===e.id?"Deleting...":(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o,{className:"mr-2 h-4 w-4"})," Delete"]})})}),(0,a.jsxs)(L,{children:[(0,a.jsxs)(W,{children:[(0,a.jsx)(Y,{children:"Are you sure?"}),(0,a.jsxs)($,{children:["This action will permanently delete scan ID ",e.id," and part number ",e.partNumber,". This cannot be undone."]})]}),(0,a.jsxs)(V,{children:[(0,a.jsx)(X,{disabled:l===e.id,children:"Cancel"}),(0,a.jsx)(U,{onClick:()=>h(e.id,e.partNumber),disabled:l===e.id,className:"bg-destructive hover:bg-destructive/90",children:l===e.id?"Deleting...":"Delete"})]})]})]})})]},e.id))}):(0,a.jsxs)(c.Zb,{className:"p-8 text-center",children:[(0,a.jsx)("div",{className:"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-muted",children:(0,a.jsx)(i.Z,{className:"h-6 w-6 text-muted-foreground"})}),(0,a.jsx)("h2",{className:"mb-2 text-xl font-semibold",children:"No Scan History"}),(0,a.jsx)("p",{className:"text-muted-foreground mb-6",children:"Once you start scanning parts, they will appear here."})]})]})}X.displayName=B.displayName},3023:function(e,t,r){"use strict";r.d(t,{d:function(){return c},z:function(){return l}});var a=r(7437),s=r(2265),n=r(7256),o=r(9213),i=r(9311);let c=(0,o.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=s.forwardRef((e,t)=>{let{className:r,variant:s,size:o,asChild:l=!1,...d}=e,u=l?n.g7:"button";return(0,a.jsx)(u,{className:(0,i.cn)(c({variant:s,size:o,className:r})),ref:t,...d})});l.displayName="Button"},6110:function(e,t,r){"use strict";r.d(t,{Ol:function(){return i},SZ:function(){return l},Zb:function(){return o},aY:function(){return d},eW:function(){return u},ll:function(){return c}});var a=r(7437),s=r(2265),n=r(9311);let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});o.displayName="Card";let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...s})});i.displayName="CardHeader";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});c.displayName="CardTitle";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...s})});l.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...s})});d.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...s})});u.displayName="CardFooter"},164:function(e,t,r){"use strict";r.d(t,{Xr:function(){return i},cn:function(){return s},li:function(){return o},xF:function(){return n}});let a="https://ce4e-2607-fea8-439d-ba00-f1be-7537-2008-afdb.ngrok-free.app/api";async function s(e){try{let t="".concat(a,"/scans");void 0!==e&&e>0&&(t+="?limit=".concat(e));let r=await fetch(t,{headers:{"ngrok-skip-browser-warning":"true"}});if(!r.ok)throw Error("HTTP error ".concat(r.status));let s=await r.json();return s.map(e=>({id:String(e.id),partNumber:e.part_number,location:e.location,timestamp:e.date_added,status:"IN"===e.scan_type?"In Stock":e.scan_type,vin:e.vin||void 0,scannedBy:e.scanned_by||"N/A",scanMethod:e.scan_method||"Barcode"}))}catch(t){return console.error("Error fetching scans:",t),c.slice(0,e||c.length)}}async function n(e){try{let t={part_number:e.partNumber,location:e.location,vin:e.vin||null};console.log("[API] Attempting to submit scan. URL:","".concat(a,"/send_scan"),"Payload:",t);let r=await fetch("".concat(a,"/send_scan"),{method:"POST",headers:{"Content-Type":"application/json","ngrok-skip-browser-warning":"true"},body:JSON.stringify(t)});if(!r.ok){let e="HTTP error ".concat(r.status);try{let t=await r.json();e=t.message||e}catch(e){}return console.error("Error submitting scan:",e),{success:!1,error:e}}let s=await r.json();return console.log("Scan submitted successfully:",s),{success:!0,data:s}}catch(e){return console.error("[API] Fetch error in submitScan:",e),{success:!1,error:e instanceof Error?e.message:"An unknown error occurred"}}}async function o(e){try{let t=await fetch("".concat(a,"/scan/").concat(e),{method:"DELETE",headers:{"ngrok-skip-browser-warning":"true"}});if(!t.ok){let e="HTTP error ".concat(t.status);try{let r=await t.json();e=r.message||e}catch(e){}if(204===t.status)return{success:!0};return console.error("Error deleting scan:",e),{success:!1,error:e}}return t.status,{success:!0}}catch(e){return console.error("[API] Fetch error in deleteScanById:",e),{success:!1,error:e instanceof Error?e.message:"An unknown error occurred"}}}async function i(e){try{let t=await fetch("".concat(a,"/part/number/").concat(e),{method:"DELETE",headers:{"ngrok-skip-browser-warning":"true"}});if(!t.ok){let e="HTTP error ".concat(t.status);try{let r=await t.json();e=r.message||e}catch(e){}if(204===t.status)return{success:!0};return console.error("Error deleting part:",e),{success:!1,error:e}}return t.status,{success:!0}}catch(e){return console.error("[API] Fetch error in deletePartByPartNumber:",e),{success:!1,error:e instanceof Error?e.message:"An unknown error occurred"}}}let c=[{id:"abc123",partNumber:"LP-2456",location:"WH-A123",timestamp:new Date(Date.now()-18e5).toISOString(),scanMethod:"Barcode"},{id:"def456",partNumber:"LP-7890",location:"WH-B456",timestamp:new Date(Date.now()-72e5).toISOString(),scanMethod:"OCR",vin:"1HGCM82633A123456"},{id:"ghi789",partNumber:"LP-1234",location:"WH-C789",timestamp:new Date(Date.now()-18e6).toISOString(),scanMethod:"Barcode"},{id:"jkl012",partNumber:"LP-5678",location:"WH-A123",timestamp:new Date(Date.now()-864e5).toISOString(),scanMethod:"OCR",vin:"5XYZU3LB5DG123456"}]},9311:function(e,t,r){"use strict";r.d(t,{cn:function(){return o},p:function(){return i}});var a=r(7042),s=r(4769),n=r(7918);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,a.W)(t))}function i(e){let t=new Date(e);return(0,n.ZP)(t,"MMM d, yyyy h:mm a")}}},function(e){e.O(0,[650,712,971,864,744],function(){return e(e.s=8431)}),_N_E=e.O()}]);