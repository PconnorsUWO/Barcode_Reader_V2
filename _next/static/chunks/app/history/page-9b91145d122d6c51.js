(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[811],{6141:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});var n=t(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,n.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},8431:function(e,r,t){Promise.resolve().then(t.bind(t,8730))},8730:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return $}});var n=t(7437),s=t(2265),a=t(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,a.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var c=t(6141),i=t(6110),l=t(9155),d=t(9311);function u(e){let{className:r,...t}=e;return(0,n.jsx)("div",{className:(0,d.cn)("animate-pulse rounded-md bg-muted",r),...t})}var f=t(3023),m=t(164),p=t(6989),h=t(2210),g=t(8712),x=t(5744),y=t(7256),w="AlertDialog",[b,v]=(0,p.b)(w,[g.p8]),j=(0,g.p8)(),N=e=>{let{__scopeAlertDialog:r,...t}=e,s=j(r);return(0,n.jsx)(g.fC,{...s,...t,modal:!0})};N.displayName=w;var k=s.forwardRef((e,r)=>{let{__scopeAlertDialog:t,...s}=e,a=j(t);return(0,n.jsx)(g.xz,{...a,...s,ref:r})});k.displayName="AlertDialogTrigger";var A=e=>{let{__scopeAlertDialog:r,...t}=e,s=j(r);return(0,n.jsx)(g.h_,{...s,...t})};A.displayName="AlertDialogPortal";var D=s.forwardRef((e,r)=>{let{__scopeAlertDialog:t,...s}=e,a=j(t);return(0,n.jsx)(g.aV,{...a,...s,ref:r})});D.displayName="AlertDialogOverlay";var P="AlertDialogContent",[R,S]=b(P),C=s.forwardRef((e,r)=>{let{__scopeAlertDialog:t,children:a,...o}=e,c=j(t),i=s.useRef(null),l=(0,h.e)(r,i),d=s.useRef(null);return(0,n.jsx)(g.jm,{contentName:P,titleName:I,docsSlug:"alert-dialog",children:(0,n.jsx)(R,{scope:t,cancelRef:d,children:(0,n.jsxs)(g.VY,{role:"alertdialog",...c,...o,ref:l,onOpenAutoFocus:(0,x.M)(o.onOpenAutoFocus,e=>{e.preventDefault(),d.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,n.jsx)(y.A4,{children:a}),(0,n.jsx)(B,{contentRef:i})]})})})});C.displayName=P;var I="AlertDialogTitle",T=s.forwardRef((e,r)=>{let{__scopeAlertDialog:t,...s}=e,a=j(t);return(0,n.jsx)(g.Dx,{...a,...s,ref:r})});T.displayName=I;var E="AlertDialogDescription",O=s.forwardRef((e,r)=>{let{__scopeAlertDialog:t,...s}=e,a=j(t);return(0,n.jsx)(g.dk,{...a,...s,ref:r})});O.displayName=E;var _=s.forwardRef((e,r)=>{let{__scopeAlertDialog:t,...s}=e,a=j(t);return(0,n.jsx)(g.x8,{...a,...s,ref:r})});_.displayName="AlertDialogAction";var F="AlertDialogCancel",H=s.forwardRef((e,r)=>{let{__scopeAlertDialog:t,...s}=e,{cancelRef:a}=S(F,t),o=j(t),c=(0,h.e)(r,a);return(0,n.jsx)(g.x8,{...o,...s,ref:c})});H.displayName=F;var B=({contentRef:e})=>{let r=`\`${P}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${P}\` by passing a \`${E}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${P}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return s.useEffect(()=>{let t=document.getElementById(e.current?.getAttribute("aria-describedby"));t||console.warn(r)},[r,e]),null};let L=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)(D,{className:(0,d.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s,ref:r})});L.displayName=D.displayName;let M=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsxs)(A,{children:[(0,n.jsx)(L,{}),(0,n.jsx)(C,{ref:r,className:(0,d.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s})]})});M.displayName=C.displayName;let V=e=>{let{className:r,...t}=e;return(0,n.jsx)("div",{className:(0,d.cn)("flex flex-col space-y-2 text-center sm:text-left",r),...t})};V.displayName="AlertDialogHeader";let Z=e=>{let{className:r,...t}=e;return(0,n.jsx)("div",{className:(0,d.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",r),...t})};Z.displayName="AlertDialogFooter";let z=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)(T,{ref:r,className:(0,d.cn)("text-lg font-semibold",t),...s})});z.displayName=T.displayName;let U=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)(O,{ref:r,className:(0,d.cn)("text-sm text-muted-foreground",t),...s})});U.displayName=O.displayName;let W=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)(_,{ref:r,className:(0,d.cn)((0,f.d)(),t),...s})});W.displayName=_.displayName;let Y=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)(H,{ref:r,className:(0,d.cn)((0,f.d)({variant:"outline"}),"mt-2 sm:mt-0",t),...s})});function $(){let[e,r]=(0,s.useState)([]),[t,a]=(0,s.useState)(!0),[p,h]=(0,s.useState)(null);(0,s.useEffect)(()=>{let e=async()=>{a(!0);try{let e=await (0,m.cn)(5);r(e)}catch(e){console.error("Failed to fetch scan history:",e)}finally{a(!1)}};e()},[]);let g=async(e,t)=>{h(e);try{let n=await (0,m.li)(e);if(!n.success){console.error("Failed to delete scan:",n.error),alert("Failed to delete scan: ".concat(n.error)),h(null);return}let s=await (0,m.Xr)(t);s.success||(console.error("Failed to delete part (scan was deleted):",s.error),alert("Scan deleted, but failed to delete part: ".concat(s.error))),r(r=>r.filter(r=>r.id!==e))}catch(e){console.error("Error during delete operation:",e),alert("An error occurred: ".concat(e instanceof Error?e.message:"Unknown error"))}finally{h(null)}};return(0,n.jsxs)("div",{className:"max-w-5xl mx-auto space-y-6",children:[(0,n.jsx)("div",{className:"flex items-center justify-between",children:(0,n.jsx)("h1",{className:"text-2xl font-bold tracking-tight",children:"Scan History"})}),t?(0,n.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[void 0,void 0,void 0,void 0,void 0].map((e,r)=>(0,n.jsxs)(i.Zb,{children:[(0,n.jsx)(i.Ol,{className:"pb-2",children:(0,n.jsx)(u,{className:"h-4 w-32"})}),(0,n.jsxs)(i.aY,{className:"space-y-2",children:[(0,n.jsx)(u,{className:"h-4 w-full"}),(0,n.jsx)(u,{className:"h-4 w-3/4"}),(0,n.jsxs)("div",{className:"pt-2 flex justify-between",children:[(0,n.jsx)(u,{className:"h-4 w-20"}),(0,n.jsx)(u,{className:"h-4 w-24"})]})]}),(0,n.jsx)(i.eW,{children:(0,n.jsx)(u,{className:"h-8 w-20"})})]},r))}):e.length>0?(0,n.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:e.map(e=>(0,n.jsxs)(i.Zb,{className:"overflow-hidden transition-all hover:shadow-md flex flex-col",children:[(0,n.jsx)(i.Ol,{className:"pb-2",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)(i.ll,{className:"text-lg",children:["Part #",e.partNumber]}),(0,n.jsx)(l.C,{variant:"In Stock"===e.status?"success":"default",children:e.status})]})}),(0,n.jsxs)(i.aY,{className:"space-y-2 flex-grow",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,n.jsx)("span",{className:"text-muted-foreground",children:"Location:"}),(0,n.jsx)("span",{children:e.location})]}),e.vin&&(0,n.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,n.jsx)("span",{className:"text-muted-foreground",children:"VIN:"}),(0,n.jsx)("span",{className:"font-mono",children:e.vin})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between text-sm pt-2 border-t mt-2",children:[(0,n.jsx)("span",{className:"text-muted-foreground",children:"Scanned by:"}),(0,n.jsx)("span",{children:e.scannedBy||"N/A"})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,n.jsx)("span",{className:"text-muted-foreground",children:"Date:"}),(0,n.jsx)("span",{children:(0,d.p)(e.timestamp)})]})]}),(0,n.jsx)(i.eW,{className:"pt-4 border-t",children:(0,n.jsxs)(N,{children:[(0,n.jsx)(k,{asChild:!0,children:(0,n.jsx)(f.z,{variant:"destructive",size:"sm",className:"w-full",disabled:p===e.id,children:p===e.id?"Deleting...":(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o,{className:"mr-2 h-4 w-4"})," Delete"]})})}),(0,n.jsxs)(M,{children:[(0,n.jsxs)(V,{children:[(0,n.jsx)(z,{children:"Are you sure?"}),(0,n.jsxs)(U,{children:["This action will permanently delete scan ID ",e.id," and part number ",e.partNumber,". This cannot be undone."]})]}),(0,n.jsxs)(Z,{children:[(0,n.jsx)(Y,{disabled:p===e.id,children:"Cancel"}),(0,n.jsx)(W,{onClick:()=>g(e.id,e.partNumber),disabled:p===e.id,className:"bg-destructive hover:bg-destructive/90",children:p===e.id?"Deleting...":"Delete"})]})]})]})})]},e.id))}):(0,n.jsxs)(i.Zb,{className:"p-8 text-center",children:[(0,n.jsx)("div",{className:"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-muted",children:(0,n.jsx)(c.Z,{className:"h-6 w-6 text-muted-foreground"})}),(0,n.jsx)("h2",{className:"mb-2 text-xl font-semibold",children:"No Scan History"}),(0,n.jsx)("p",{className:"text-muted-foreground mb-6",children:"Once you start scanning parts, they will appear here."})]})]})}Y.displayName=H.displayName},9155:function(e,r,t){"use strict";t.d(r,{C:function(){return c}});var n=t(7437);t(2265);var s=t(9213),a=t(9311);let o=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600"}},defaultVariants:{variant:"default"}});function c(e){let{className:r,variant:t,...s}=e;return(0,n.jsx)("div",{className:(0,a.cn)(o({variant:t}),r),...s})}},3023:function(e,r,t){"use strict";t.d(r,{d:function(){return i},z:function(){return l}});var n=t(7437),s=t(2265),a=t(7256),o=t(9213),c=t(9311);let i=(0,o.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=s.forwardRef((e,r)=>{let{className:t,variant:s,size:o,asChild:l=!1,...d}=e,u=l?a.g7:"button";return(0,n.jsx)(u,{className:(0,c.cn)(i({variant:s,size:o,className:t})),ref:r,...d})});l.displayName="Button"},6110:function(e,r,t){"use strict";t.d(r,{Ol:function(){return c},SZ:function(){return l},Zb:function(){return o},aY:function(){return d},eW:function(){return u},ll:function(){return i}});var n=t(7437),s=t(2265),a=t(9311);let o=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)("div",{ref:r,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...s})});o.displayName="Card";let c=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)("div",{ref:r,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",t),...s})});c.displayName="CardHeader";let i=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)("h3",{ref:r,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",t),...s})});i.displayName="CardTitle";let l=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)("p",{ref:r,className:(0,a.cn)("text-sm text-muted-foreground",t),...s})});l.displayName="CardDescription";let d=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)("div",{ref:r,className:(0,a.cn)("p-6 pt-0",t),...s})});d.displayName="CardContent";let u=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)("div",{ref:r,className:(0,a.cn)("flex items-center p-6 pt-0",t),...s})});u.displayName="CardFooter"},164:function(e,r,t){"use strict";t.d(r,{FP:function(){return f},Xr:function(){return c},Y8:function(){return d},cn:function(){return s},e3:function(){return a},ei:function(){return l},jJ:function(){return u},li:function(){return o},t$:function(){return i}});let n="https://www.rfscans.ca/api";async function s(e){try{let r="".concat(n,"/scans");void 0!==e&&e>0&&(r+="?limit=".concat(e));let t=await fetch(r,{headers:{"ngrok-skip-browser-warning":"true"}});if(!t.ok)throw Error("HTTP error ".concat(t.status));let s=await t.json();return s.map(e=>({id:String(e.id),partNumber:e.part_number,location:e.location,timestamp:e.date_added,status:"IN"===e.scan_type?"In Stock":e.scan_type,vin:e.vin||void 0,scannedBy:e.scanned_by||"N/A",scanMethod:e.scan_method||"Barcode"}))}catch(r){return console.error("Error fetching scans:",r),m.slice(0,e||m.length)}}function a(e){let r={part_number:e.partNumber,location:e.location,vin:e.vin||null};console.log("[API] Fire-and-forget scan submission:",r),fetch("".concat(n,"/send_scan"),{method:"POST",headers:{"Content-Type":"application/json","ngrok-skip-browser-warning":"true"},body:JSON.stringify(r)}).then(e=>{e.ok?console.log("[API] Scan submitted successfully (fire-and-forget)"):console.warn("[API] Scan submission may have failed (fire-and-forget):",e.status)}).catch(e=>{console.warn("[API] Scan submission error (fire-and-forget):",e)})}async function o(e){try{let r=await fetch("".concat(n,"/scan/").concat(e),{method:"DELETE",headers:{"ngrok-skip-browser-warning":"true"}});if(!r.ok){let e="HTTP error ".concat(r.status);try{let t=await r.json();e=t.message||e}catch(e){}if(204===r.status)return{success:!0};return console.error("Error deleting scan:",e),{success:!1,error:e}}return r.status,{success:!0}}catch(e){return console.error("[API] Fetch error in deleteScanById:",e),{success:!1,error:e instanceof Error?e.message:"An unknown error occurred"}}}async function c(e){try{let r=await fetch("".concat(n,"/part/number/").concat(e),{method:"DELETE",headers:{"ngrok-skip-browser-warning":"true"}});if(!r.ok){let e="HTTP error ".concat(r.status);try{let t=await r.json();e=t.message||e}catch(e){}if(204===r.status)return{success:!0};return console.error("Error deleting part:",e),{success:!1,error:e}}return r.status,{success:!0}}catch(e){return console.error("[API] Fetch error in deletePartByPartNumber:",e),{success:!1,error:e instanceof Error?e.message:"An unknown error occurred"}}}async function i(e){try{let r=await fetch("".concat(n,"/vehicle/").concat(e.toUpperCase()),{headers:{"ngrok-skip-browser-warning":"true"}});if(!r.ok){let e="HTTP error ".concat(r.status);try{let t=await r.json();e=t.message||e}catch(e){}return{success:!1,error:e}}let t=await r.json();return{success:!0,data:t.vehicle}}catch(e){return console.error("[API] Fetch error in fetchVehicleByVin:",e),{success:!1,error:e instanceof Error?e.message:"An unknown error occurred"}}}async function l(e){try{let r=await fetch("".concat(n,"/vehicle/").concat(e.toUpperCase(),"/parts"),{headers:{"ngrok-skip-browser-warning":"true"}});if(!r.ok){let e="HTTP error ".concat(r.status);try{let t=await r.json();e=t.message||e}catch(e){}return{success:!1,error:e}}let t=await r.json();return{success:!0,data:t.parts}}catch(e){return console.error("[API] Fetch error in fetchPartsByVin:",e),{success:!1,error:e instanceof Error?e.message:"An unknown error occurred"}}}async function d(e){try{let r=await fetch("".concat(n,"/part/").concat(e,"/vehicles"),{headers:{"ngrok-skip-browser-warning":"true"}});if(!r.ok){let e="HTTP error ".concat(r.status);try{let t=await r.json();e=t.message||e}catch(e){}return{success:!1,error:e}}let t=await r.json();return{success:!0,data:t.vehicles}}catch(e){return console.error("[API] Fetch error in fetchVehiclesByPartNumber:",e),{success:!1,error:e instanceof Error?e.message:"An unknown error occurred"}}}async function u(){try{let e=await fetch("".concat(n,"/admin/reports/generate_inventory_excel"),{headers:{"ngrok-skip-browser-warning":"true"}});if(!e.ok){let r="HTTP error ".concat(e.status);try{let t=await e.json();r=t.message||r}catch(e){}return{success:!1,error:r}}let r=await e.blob(),t=window.URL.createObjectURL(r),s=document.createElement("a");return s.style.display="none",s.href=t,s.download="inventory_report_".concat(new Date().toISOString().split("T")[0],".xlsx"),document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(t),document.body.removeChild(s),{success:!0}}catch(e){return console.error("[API] Fetch error in downloadInventoryReport:",e),{success:!1,error:e instanceof Error?e.message:"An unknown error occurred"}}}async function f(e){try{let r=new FormData;r.append("image",e),console.log("[API] Attempting to process image via OCR. URL:","".concat(n,"/ocr/process_image"));let t=await fetch("".concat(n,"/ocr/process_image"),{method:"POST",headers:{"ngrok-skip-browser-warning":"true"},body:r});if(!t.ok){let e="HTTP error ".concat(t.status);try{let r=await t.json();e=r.message||e}catch(e){}return console.error("Error processing image:",e),{success:!1,error:e}}let s=await t.json();return console.log("Image processed successfully:",s),{success:!0,vin:s.vin,partNumber:s.part_number}}catch(e){return console.error("[API] Fetch error in processImageOCR:",e),{success:!1,error:e instanceof Error?e.message:"An unknown error occurred"}}}let m=[{id:"abc123",partNumber:"LP-2456",location:"WH-A123",timestamp:new Date(Date.now()-18e5).toISOString(),scanMethod:"Barcode"},{id:"def456",partNumber:"LP-7890",location:"WH-B456",timestamp:new Date(Date.now()-72e5).toISOString(),scanMethod:"OCR",vin:"1HGCM82633A123456"},{id:"ghi789",partNumber:"LP-1234",location:"WH-C789",timestamp:new Date(Date.now()-18e6).toISOString(),scanMethod:"Barcode"},{id:"jkl012",partNumber:"LP-5678",location:"WH-A123",timestamp:new Date(Date.now()-864e5).toISOString(),scanMethod:"OCR",vin:"5XYZU3LB5DG123456"}]},9311:function(e,r,t){"use strict";t.d(r,{cn:function(){return o},p:function(){return c}});var n=t(7042),s=t(4769),a=t(7918);function o(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.m6)((0,n.W)(r))}function c(e){let r=new Date(e);return(0,a.ZP)(r,"MMM d, yyyy h:mm a")}}},function(e){e.O(0,[650,712,971,864,744],function(){return e(e.s=8431)}),_N_E=e.O()}]);