(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[811],{6141:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},8431:function(e,t,r){Promise.resolve().then(r.bind(r,4002))},4002:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return G}});var s=r(7437),a=r(2265),n=r(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,n.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var c=r(6141),i=r(6110),l=r(9213),d=r(9311);let u=(0,l.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600"}},defaultVariants:{variant:"default"}});function f(e){let{className:t,variant:r,...a}=e;return(0,s.jsx)("div",{className:(0,d.cn)(u({variant:r}),t),...a})}function m(e){let{className:t,...r}=e;return(0,s.jsx)("div",{className:(0,d.cn)("animate-pulse rounded-md bg-muted",t),...r})}var p=r(3023),x=r(164),g=r(6989),h=r(2210),y=r(8712),b=r(5744),v=r(7256),j="AlertDialog",[N,w]=(0,g.b)(j,[y.p8]),k=(0,y.p8)(),A=e=>{let{__scopeAlertDialog:t,...r}=e,a=k(t);return(0,s.jsx)(y.fC,{...a,...r,modal:!0})};A.displayName=j;var D=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,n=k(r);return(0,s.jsx)(y.xz,{...n,...a,ref:t})});D.displayName="AlertDialogTrigger";var R=e=>{let{__scopeAlertDialog:t,...r}=e,a=k(t);return(0,s.jsx)(y.h_,{...a,...r})};R.displayName="AlertDialogPortal";var S=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,n=k(r);return(0,s.jsx)(y.aV,{...n,...a,ref:t})});S.displayName="AlertDialogOverlay";var P="AlertDialogContent",[E,C]=N(P),O=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,children:n,...o}=e,c=k(r),i=a.useRef(null),l=(0,h.e)(t,i),d=a.useRef(null);return(0,s.jsx)(y.jm,{contentName:P,titleName:I,docsSlug:"alert-dialog",children:(0,s.jsx)(E,{scope:r,cancelRef:d,children:(0,s.jsxs)(y.VY,{role:"alertdialog",...c,...o,ref:l,onOpenAutoFocus:(0,b.M)(o.onOpenAutoFocus,e=>{e.preventDefault(),d.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,s.jsx)(v.A4,{children:n}),(0,s.jsx)(Z,{contentRef:i})]})})})});O.displayName=P;var I="AlertDialogTitle",T=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,n=k(r);return(0,s.jsx)(y.Dx,{...n,...a,ref:t})});T.displayName=I;var _="AlertDialogDescription",F=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,n=k(r);return(0,s.jsx)(y.dk,{...n,...a,ref:t})});F.displayName=_;var H=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,n=k(r);return(0,s.jsx)(y.x8,{...n,...a,ref:t})});H.displayName="AlertDialogAction";var M="AlertDialogCancel",B=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,{cancelRef:n}=C(M,r),o=k(r),c=(0,h.e)(t,n);return(0,s.jsx)(y.x8,{...o,...a,ref:c})});B.displayName=M;var Z=({contentRef:e})=>{let t=`\`${P}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${P}\` by passing a \`${_}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${P}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return a.useEffect(()=>{let r=document.getElementById(e.current?.getAttribute("aria-describedby"));r||console.warn(t)},[t,e]),null};let z=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(S,{className:(0,d.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...a,ref:t})});z.displayName=S.displayName;let L=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsxs)(R,{children:[(0,s.jsx)(z,{}),(0,s.jsx)(O,{ref:t,className:(0,d.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...a})]})});L.displayName=O.displayName;let W=e=>{let{className:t,...r}=e;return(0,s.jsx)("div",{className:(0,d.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...r})};W.displayName="AlertDialogHeader";let V=e=>{let{className:t,...r}=e;return(0,s.jsx)("div",{className:(0,d.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};V.displayName="AlertDialogFooter";let Y=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(T,{ref:t,className:(0,d.cn)("text-lg font-semibold",r),...a})});Y.displayName=T.displayName;let U=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(F,{ref:t,className:(0,d.cn)("text-sm text-muted-foreground",r),...a})});U.displayName=F.displayName;let $=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(H,{ref:t,className:(0,d.cn)((0,p.d)(),r),...a})});$.displayName=H.displayName;let X=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(B,{ref:t,className:(0,d.cn)((0,p.d)({variant:"outline"}),"mt-2 sm:mt-0",r),...a})});function G(){let[e,t]=(0,a.useState)([]),[r,n]=(0,a.useState)(!0),[l,u]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=async()=>{n(!0);try{let e=await (0,x.cn)(5);t(e)}catch(e){console.error("Failed to fetch scan history:",e)}finally{n(!1)}};e()},[]);let g=async(e,r)=>{u(e);try{let s=await (0,x.li)(e);if(!s.success){console.error("Failed to delete scan:",s.error),alert("Failed to delete scan: ".concat(s.error)),u(null);return}let a=await (0,x.Xr)(r);a.success||(console.error("Failed to delete part (scan was deleted):",a.error),alert("Scan deleted, but failed to delete part: ".concat(a.error))),t(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Error during delete operation:",e),alert("An error occurred: ".concat(e instanceof Error?e.message:"Unknown error"))}finally{u(null)}};return(0,s.jsxs)("div",{className:"max-w-5xl mx-auto space-y-6",children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsx)("h1",{className:"text-2xl font-bold tracking-tight",children:"Scan History"})}),r?(0,s.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,s.jsxs)(i.Zb,{children:[(0,s.jsx)(i.Ol,{className:"pb-2",children:(0,s.jsx)(m,{className:"h-4 w-32"})}),(0,s.jsxs)(i.aY,{className:"space-y-2",children:[(0,s.jsx)(m,{className:"h-4 w-full"}),(0,s.jsx)(m,{className:"h-4 w-3/4"}),(0,s.jsxs)("div",{className:"pt-2 flex justify-between",children:[(0,s.jsx)(m,{className:"h-4 w-20"}),(0,s.jsx)(m,{className:"h-4 w-24"})]})]}),(0,s.jsx)(i.eW,{children:(0,s.jsx)(m,{className:"h-8 w-20"})})]},t))}):e.length>0?(0,s.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:e.map(e=>(0,s.jsxs)(i.Zb,{className:"overflow-hidden transition-all hover:shadow-md flex flex-col",children:[(0,s.jsx)(i.Ol,{className:"pb-2",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)(i.ll,{className:"text-lg",children:["Part #",e.partNumber]}),(0,s.jsx)(f,{variant:"In Stock"===e.status?"success":"default",children:e.status})]})}),(0,s.jsxs)(i.aY,{className:"space-y-2 flex-grow",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Location:"}),(0,s.jsx)("span",{children:e.location})]}),e.vin&&(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"VIN:"}),(0,s.jsx)("span",{className:"font-mono",children:e.vin})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm pt-2 border-t mt-2",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Scanned by:"}),(0,s.jsx)("span",{children:e.scannedBy||"N/A"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Date:"}),(0,s.jsx)("span",{children:(0,d.p)(e.timestamp)})]})]}),(0,s.jsx)(i.eW,{className:"pt-4 border-t",children:(0,s.jsxs)(A,{children:[(0,s.jsx)(D,{asChild:!0,children:(0,s.jsx)(p.z,{variant:"destructive",size:"sm",className:"w-full",disabled:l===e.id,children:l===e.id?"Deleting...":(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o,{className:"mr-2 h-4 w-4"})," Delete"]})})}),(0,s.jsxs)(L,{children:[(0,s.jsxs)(W,{children:[(0,s.jsx)(Y,{children:"Are you sure?"}),(0,s.jsxs)(U,{children:["This action will permanently delete scan ID ",e.id," and part number ",e.partNumber,". This cannot be undone."]})]}),(0,s.jsxs)(V,{children:[(0,s.jsx)(X,{disabled:l===e.id,children:"Cancel"}),(0,s.jsx)($,{onClick:()=>g(e.id,e.partNumber),disabled:l===e.id,className:"bg-destructive hover:bg-destructive/90",children:l===e.id?"Deleting...":"Delete"})]})]})]})})]},e.id))}):(0,s.jsxs)(i.Zb,{className:"p-8 text-center",children:[(0,s.jsx)("div",{className:"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-muted",children:(0,s.jsx)(c.Z,{className:"h-6 w-6 text-muted-foreground"})}),(0,s.jsx)("h2",{className:"mb-2 text-xl font-semibold",children:"No Scan History"}),(0,s.jsx)("p",{className:"text-muted-foreground mb-6",children:"Once you start scanning parts, they will appear here."})]})]})}X.displayName=B.displayName},3023:function(e,t,r){"use strict";r.d(t,{d:function(){return i},z:function(){return l}});var s=r(7437),a=r(2265),n=r(7256),o=r(9213),c=r(9311);let i=(0,o.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=a.forwardRef((e,t)=>{let{className:r,variant:a,size:o,asChild:l=!1,...d}=e,u=l?n.g7:"button";return(0,s.jsx)(u,{className:(0,c.cn)(i({variant:a,size:o,className:r})),ref:t,...d})});l.displayName="Button"},6110:function(e,t,r){"use strict";r.d(t,{Ol:function(){return c},SZ:function(){return l},Zb:function(){return o},aY:function(){return d},eW:function(){return u},ll:function(){return i}});var s=r(7437),a=r(2265),n=r(9311);let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});o.displayName="Card";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...a})});c.displayName="CardHeader";let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});i.displayName="CardTitle";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...a})});l.displayName="CardDescription";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...a})});d.displayName="CardContent";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...a})});u.displayName="CardFooter"},164:function(e,t,r){"use strict";r.d(t,{FP:function(){return i},Xr:function(){return c},cn:function(){return a},li:function(){return o},xF:function(){return n}});let s="https://www.rfscans.ca/api";async function a(e){try{let t="".concat(s,"/scans");void 0!==e&&e>0&&(t+="?limit=".concat(e));let r=await fetch(t,{headers:{"ngrok-skip-browser-warning":"true"}});if(!r.ok)throw Error("HTTP error ".concat(r.status));let a=await r.json();return a.map(e=>({id:String(e.id),partNumber:e.part_number,location:e.location,timestamp:e.date_added,status:"IN"===e.scan_type?"In Stock":e.scan_type,vin:e.vin||void 0,scannedBy:e.scanned_by||"N/A",scanMethod:e.scan_method||"Barcode"}))}catch(t){return console.error("Error fetching scans:",t),l.slice(0,e||l.length)}}async function n(e){try{let t={part_number:e.partNumber,location:e.location,vin:e.vin||null};console.log("[API] Attempting to submit scan. URL:","".concat(s,"/send_scan"),"Payload:",t);let r=await fetch("".concat(s,"/send_scan"),{method:"POST",headers:{"Content-Type":"application/json","ngrok-skip-browser-warning":"true"},body:JSON.stringify(t)});if(!r.ok){let e="HTTP error ".concat(r.status);try{let t=await r.json();e=t.message||e}catch(e){}return console.error("Error submitting scan:",e),{success:!1,error:e}}let a=await r.json();return console.log("Scan submitted successfully:",a),{success:!0,data:a}}catch(e){return console.error("[API] Fetch error in submitScan:",e),{success:!1,error:e instanceof Error?e.message:"An unknown error occurred"}}}async function o(e){try{let t=await fetch("".concat(s,"/scan/").concat(e),{method:"DELETE",headers:{"ngrok-skip-browser-warning":"true"}});if(!t.ok){let e="HTTP error ".concat(t.status);try{let r=await t.json();e=r.message||e}catch(e){}if(204===t.status)return{success:!0};return console.error("Error deleting scan:",e),{success:!1,error:e}}return t.status,{success:!0}}catch(e){return console.error("[API] Fetch error in deleteScanById:",e),{success:!1,error:e instanceof Error?e.message:"An unknown error occurred"}}}async function c(e){try{let t=await fetch("".concat(s,"/part/number/").concat(e),{method:"DELETE",headers:{"ngrok-skip-browser-warning":"true"}});if(!t.ok){let e="HTTP error ".concat(t.status);try{let r=await t.json();e=r.message||e}catch(e){}if(204===t.status)return{success:!0};return console.error("Error deleting part:",e),{success:!1,error:e}}return t.status,{success:!0}}catch(e){return console.error("[API] Fetch error in deletePartByPartNumber:",e),{success:!1,error:e instanceof Error?e.message:"An unknown error occurred"}}}async function i(e){try{let t=new FormData;t.append("image",e),console.log("[API] Attempting to process image via OCR. URL:","".concat(s,"/ocr/process_image"));let r=await fetch("".concat(s,"/ocr/process_image"),{method:"POST",headers:{"ngrok-skip-browser-warning":"true"},body:t});if(!r.ok){let e="HTTP error ".concat(r.status);try{let t=await r.json();e=t.message||e}catch(e){}return console.error("Error processing image:",e),{success:!1,error:e}}let a=await r.json();return console.log("Image processed successfully:",a),{success:!0,vin:a.vin,partNumber:a.part_number}}catch(e){return console.error("[API] Fetch error in processImageOCR:",e),{success:!1,error:e instanceof Error?e.message:"An unknown error occurred"}}}let l=[{id:"abc123",partNumber:"LP-2456",location:"WH-A123",timestamp:new Date(Date.now()-18e5).toISOString(),scanMethod:"Barcode"},{id:"def456",partNumber:"LP-7890",location:"WH-B456",timestamp:new Date(Date.now()-72e5).toISOString(),scanMethod:"OCR",vin:"1HGCM82633A123456"},{id:"ghi789",partNumber:"LP-1234",location:"WH-C789",timestamp:new Date(Date.now()-18e6).toISOString(),scanMethod:"Barcode"},{id:"jkl012",partNumber:"LP-5678",location:"WH-A123",timestamp:new Date(Date.now()-864e5).toISOString(),scanMethod:"OCR",vin:"5XYZU3LB5DG123456"}]},9311:function(e,t,r){"use strict";r.d(t,{cn:function(){return o},p:function(){return c}});var s=r(7042),a=r(4769),n=r(7918);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,s.W)(t))}function c(e){let t=new Date(e);return(0,n.ZP)(t,"MMM d, yyyy h:mm a")}}},function(e){e.O(0,[650,712,971,864,744],function(){return e(e.s=8431)}),_N_E=e.O()}]);